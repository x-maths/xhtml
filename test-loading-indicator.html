<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ è½½æç¤ºæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .demo-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
        button {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <h1>ğŸ¨ P5.js åŠ è½½æç¤ºæµ‹è¯•</h1>
    
    <div class="demo-card">
        <h2>âœ¨ æ–°åŠŸèƒ½è¯´æ˜</h2>
        <p>ç°åœ¨åŠ¨ç”»åŠ è½½å®Œæˆåä¼šè‡ªåŠ¨éšè—"åŠ è½½ä¸­"æç¤º,æå‡ç”¨æˆ·ä½“éªŒ!</p>
        
        <div class="info">
            <strong>å®ç°åŸç†:</strong>
            <ol>
                <li>ç»™æ¯ä¸ªåŠ è½½æç¤ºæ·»åŠ å”¯ä¸€ID: <code>loading-${containerId}</code></li>
                <li>åœ¨p5å®ä¾‹åˆ›å»ºå,ä½¿ç”¨ <code>setTimeout</code> å»¶è¿Ÿ50ms</li>
                <li>éšè—åŠ è½½æç¤ºå…ƒç´ : <code>display: none</code></li>
                <li>è°ƒæ•´å®¹å™¨å¸ƒå±€,è®©canvasæ­£å¸¸æ˜¾ç¤º</li>
            </ol>
        </div>
    </div>

    <div class="demo-card">
        <h2>ğŸ§ª æµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€æµ‹è¯•é¡µé¢</li>
            <li>è§‚å¯ŸåŠ¨ç”»å®¹å™¨çš„"â³ åŠ è½½åŠ¨ç”»ä¸­..."æç¤º</li>
            <li>åŠ¨ç”»åŠ è½½å®Œæˆå,æç¤ºåº”è¯¥è‡ªåŠ¨æ¶ˆå¤±</li>
            <li>canvasåº”è¯¥æ­£å¸¸æ˜¾ç¤ºåœ¨å®¹å™¨ä¸­</li>
        </ol>
        
        <button onclick="window.open('template.html?config=config-with-p5-enhanced.json', '_blank')">
            ğŸš€ æ‰“å¼€æµ‹è¯•é¡µé¢ (å†…è”ä»£ç )
        </button>
        
        <button onclick="window.open('template.html?config=config-external-sketch.json', '_blank')">
            ğŸš€ æ‰“å¼€æµ‹è¯•é¡µé¢ (å¤–éƒ¨URL)
        </button>
    </div>

    <div class="demo-card">
        <h2>ğŸ“ ä»£ç å˜æ›´</h2>
        
        <h3>1. renderP5() å‡½æ•°</h3>
        <p>ç»™åŠ è½½æç¤ºæ·»åŠ å”¯ä¸€ID:</p>
        <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px;">
&lt;div id="loading-${p5Config.containerId}" class="text-sm" ...&gt;
    â³ åŠ è½½åŠ¨ç”»ä¸­...
&lt;/div&gt;</pre>

        <h3>2. initializeSingleP5Sketch() å‡½æ•°</h3>
        <p>åœ¨p5å®ä¾‹åˆ›å»ºåéšè—åŠ è½½æç¤º:</p>
        <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px;">
// éšè—åŠ è½½æç¤º
const loadingElement = document.getElementById(`loading-${containerId}`);

const p5Instance = new p5((p) => {
    sketchFunc(p, containerId, sketch.params || {});
    
    // åœ¨setupå®Œæˆåéšè—åŠ è½½æç¤º
    setTimeout(() => {
        if (loadingElement) {
            loadingElement.style.display = 'none';
        }
        // ç§»é™¤å®¹å™¨çš„flexå¸ƒå±€
        const container = document.getElementById(containerId);
        if (container) {
            container.style.display = 'block';
            container.style.alignItems = '';
            container.style.justifyContent = '';
        }
    }, 50);
});</pre>
    </div>

    <div class="demo-card">
        <h2>ğŸ¯ é¢„æœŸæ•ˆæœ</h2>
        <ul>
            <li>âœ… é¡µé¢åŠ è½½æ—¶æ˜¾ç¤º"â³ åŠ è½½åŠ¨ç”»ä¸­..."</li>
            <li>âœ… åŠ¨ç”»åˆå§‹åŒ–å®Œæˆå(çº¦50-150ms)æç¤ºæ¶ˆå¤±</li>
            <li>âœ… canvaså¹³æ»‘æ˜¾ç¤º,æ— é—ªçƒ</li>
            <li>âœ… å®¹å™¨å¸ƒå±€è‡ªåŠ¨è°ƒæ•´</li>
            <li>âœ… å¤šä¸ªåŠ¨ç”»äº’ä¸å¹²æ‰°</li>
        </ul>
    </div>

    <div class="demo-card">
        <h2>ğŸ” è°ƒè¯•æŠ€å·§</h2>
        <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°,å¯ä»¥çœ‹åˆ°:</p>
        <ul>
            <li>ğŸ“ ä»é…ç½®ä»£ç åˆ›å»º sketch "remainderSketch"</li>
            <li>âœ… P5 sketch "remainderSketch" åˆå§‹åŒ–æˆåŠŸ</li>
        </ul>
        
        <p>æ£€æŸ¥DOMå…ƒç´ :</p>
        <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px;">
// æŸ¥çœ‹åŠ è½½æç¤ºæ˜¯å¦éšè—
document.getElementById('loading-remainder-demo')
// åº”è¯¥è¿”å›å…ƒç´ ,ä½† style.display === 'none'

// æŸ¥çœ‹å®¹å™¨
document.getElementById('remainder-demo')
// åº”è¯¥åŒ…å« canvas å…ƒç´ </pre>
    </div>

    <script>
        console.log('ğŸ“ åŠ è½½æç¤ºæµ‹è¯•é¡µé¢å·²å°±ç»ª');
        console.log('ğŸ¯ åŠŸèƒ½: åŠ¨ç”»åŠ è½½å®Œæˆåè‡ªåŠ¨éšè—åŠ è½½æç¤º');
        console.log('ğŸ“š ç›¸å…³æ–‡ä»¶:');
        console.log('  - template.html (å·²æ›´æ–°)');
        console.log('  - config-with-p5-enhanced.json');
        console.log('  - config-external-sketch.json');
    </script>
</body>
</html>
