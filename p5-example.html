<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5åŠ¨ç”»ç¤ºä¾‹</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@2.1.1/lib/p5.js"></script>
    <style>
        body {
            font-family: 'PingFang SC', sans-serif;
            background: #0a0e27;
            color: #e0e7ff;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .cyber-card {
            background: #161b33;
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 16px;
            padding: 16px;
            margin: 20px 0;
        }
        h1 {
            text-align: center;
            color: #00ffff;
        }
        .text-center {
            text-align: center;
        }
        .font-bold {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ä½™æ•°æ¼”ç¤ºåŠ¨ç”»</h1>
    
    <div class="cyber-card">
        <div class="text-center" style="margin-bottom: 12px;">
            <span class="font-bold" style="color: #00ffff">ğŸ“Š å¯è§†åŒ–æ¼”ç¤º</span>
        </div>
        <div id="remainder-demo" style="background: rgba(0,0,0,0.2); border-radius: 8px; overflow: hidden;"></div>
        <div class="text-center" style="margin-top: 12px; color: #a5b4fc;">
            10 Ã· 3 = 3 ... 1
        </div>
    </div>

    <script>
        // ä½™æ•°æ¼”ç¤ºåŠ¨ç”» (p5.js instance mode)
        const remainderSketch = function(p) {
            let apples = [];
            let kids = [];
            let animationStep = 0;
            let stepTimer = 0;
            const totalApples = 10;
            const totalKids = 3;
            let canvasWidth = 400;
            let canvasHeight = 300;
            
            p.setup = function() {
                // è·å–å®¹å™¨å®½åº¦
                const container = document.getElementById('remainder-demo');
                canvasWidth = Math.min(container.offsetWidth, 400);
                canvasHeight = canvasWidth * 0.75; // ä¿æŒ4:3æ¯”ä¾‹
                
                const canvas = p.createCanvas(canvasWidth, canvasHeight);
                canvas.parent('remainder-demo');
                
                initPositions();
            };
            
            function initPositions() {
                apples = [];
                kids = [];
                
                // æ ¹æ®ç”»å¸ƒå®½åº¦è®¡ç®—ç¼©æ”¾æ¯”ä¾‹
                const scale = canvasWidth / 400;
                
                // åˆå§‹åŒ–è‹¹æœä½ç½®ï¼ˆé¡¶éƒ¨ä¸€æ’ï¼‰
                for (let i = 0; i < totalApples; i++) {
                    apples.push({
                        x: (40 + (i % 5) * 70) * scale,
                        y: (40 + Math.floor(i / 5) * 60) * scale,
                        targetX: 0,
                        targetY: 0,
                        assigned: false,
                        kidIndex: -1
                    });
                }
                
                // åˆå§‹åŒ–å°æœ‹å‹ä½ç½®ï¼ˆåº•éƒ¨ï¼‰
                for (let i = 0; i < totalKids; i++) {
                    kids.push({
                        x: (80 + i * 120) * scale,
                        y: 220 * scale,
                        count: 0
                    });
                }
            }
            
            p.draw = function() {
                p.background(10, 15, 35);
                const scale = canvasWidth / 400;
                
                // ç»˜åˆ¶æ ‡é¢˜
                p.fill(100, 200, 255);
                p.textSize(16 * scale);
                p.textAlign(p.CENTER);
                p.text('10ä¸ªè‹¹æœ Ã· 3ä¸ªå°æœ‹å‹', canvasWidth / 2, 25 * scale);
                
                // åŠ¨ç”»é€»è¾‘
                stepTimer++;
                if (stepTimer > 60 && animationStep < totalApples) {
                    stepTimer = 0;
                    const apple = apples[animationStep];
                    const kidIndex = animationStep % totalKids;
                    
                    if (animationStep < 9) { // å‰9ä¸ªåˆ†é…ç»™å°æœ‹å‹
                        apple.assigned = true;
                        apple.kidIndex = kidIndex;
                        apple.targetX = kids[kidIndex].x - 30 * scale + (kids[kidIndex].count % 3) * 30 * scale;
                        apple.targetY = kids[kidIndex].y - 20 * scale - Math.floor(kids[kidIndex].count / 3) * 30 * scale;
                        kids[kidIndex].count++;
                    }
                    animationStep++;
                }
                
                // ç»˜åˆ¶å°æœ‹å‹
                for (let i = 0; i < kids.length; i++) {
                    p.fill(124, 58, 237, 150);
                    p.ellipse(kids[i].x, kids[i].y, 50 * scale, 50 * scale);
                    p.fill(255);
                    p.textSize(12 * scale);
                    p.textAlign(p.CENTER);
                    p.text('ğŸ‘¦', kids[i].x, kids[i].y + 5 * scale);
                    p.text(kids[i].count + 'ä¸ª', kids[i].x, kids[i].y + 40 * scale);
                }
                
                // ç»˜åˆ¶è‹¹æœ
                for (let i = 0; i < apples.length; i++) {
                    const apple = apples[i];
                    
                    if (apple.assigned) {
                        // ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®
                        apple.x = p.lerp(apple.x, apple.targetX, 0.1);
                        apple.y = p.lerp(apple.y, apple.targetY, 0.1);
                    }
                    
                    // ç»˜åˆ¶è‹¹æœ
                    if (i === 9 && animationStep > 9) {
                        // æœ€åä¸€ä¸ªè‹¹æœï¼ˆä½™æ•°ï¼‰ç”¨ä¸åŒé¢œè‰²
                        p.fill(255, 200, 0);
                        p.stroke(255, 150, 0);
                    } else {
                        p.fill(255, 100, 100);
                        p.stroke(200, 50, 50);
                    }
                    p.strokeWeight(2 * scale);
                    p.ellipse(apple.x, apple.y, 25 * scale, 25 * scale);
                    p.noStroke();
                    p.fill(255);
                    p.textSize(16 * scale);
                    p.text('ğŸ', apple.x, apple.y + 5 * scale);
                }
                
                // æ˜¾ç¤ºä½™æ•°æç¤º
                if (animationStep > 9) {
                    p.fill(255, 200, 0);
                    p.textSize(16 * scale);
                    p.textAlign(p.CENTER);
                    p.text('ä½™æ•°ï¼š1ä¸ªè‹¹æœ', 320 * scale, apples[9].y - 16);
                }
            };
        };
        
        // åˆ›å»ºä½™æ•°æ¼”ç¤ºåŠ¨ç”»å®ä¾‹
        new p5(remainderSketch);
    </script>
</body>
</html>
